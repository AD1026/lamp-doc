---
title: 员工维护
category:
  - 功能介绍
tag:
  - 功能介绍
  - 基础平台
  - 员工维护
---

租户在**员工维护**页面添加员工，一个用户若属于多个租户，他在每个租户下都有1条员工数据，但仅有1条用户数据。

::: tip

用户和员工是2个概念，用户只全局唯一的，员工的在某个企业内唯一的，一个用户可以归属于多个企业，在企业内部称为员工。 用户表存的的跟账号相关的信息，员工表存的是跟员工相关的信息。
:::

![用户-员工ER图](/images/intro/用户-员工ER图.png)

想成为某个企业的员工有几种方式：

1. 企业的管理员在**基础平台** - **员工维护**页面新增员工。新增员工会同时向base_employee、def_user、def_user_tenant_ref表写入数据，并绑定好映射关系。此场景适合该用户从未注册过本系统或其他企业从未给他新增过员工记录。
2. 用户通过手机号自行注册系统（此时仅def_user表有数据），然后企业的管理员在**基础平台** - **员工维护**页面邀请用户加入企业。
3. 运营者或开发者在**开发运营系统** - **用户维护**页面为用户新增用户数据（此时仅def_user表有数据），然后企业的管理员在**基础平台** - **员工维护**页面邀请用户加入企业。



## 涉及表

- base_employee

  员工表

- def_user_tenant_rel

  全局员工表

- def_user

  用户表

  

## 字段解释

1. user_id：用户ID，关联lamp_defaults库的def_user表的id

2. main_org_id：员工的主要部门或默认部门。一个员工可以归属多个部门，但需要设置一个主部门

3. position_id：员工的岗位

4. real_name：真实姓名

5. active_status：激活状态[10-未激活 20-已激活]

6. position_status：职位状态;[10-在职 20-离职]

7. state：状态;[0-禁用 1-启用]

   员工被某个企业禁用后，员工不能切换到该企业

   ::: tip
   
   用户禁用、员工禁用、企业禁用之间的关系
   
   1. 用户禁用后，不能登录系统
   2. 员工被某个企业禁用后，员工不能切换到该企业
   3. 企业被禁用后，该企业不再可用，且企业下的所有员工，不能切换到该企业
   
   :::



## 功能介绍：

1. 新增

   新增员工时，会向base_employee、def_user、def_user_tenant_rel 3张表同时保存一条数据，涉及同时保存2个数据库的数据，因此新增员工接口存在**分布式事务**，为了保证您的数据一致性，请一定要在生产使用seata保证分布式事务。（column和none模式不涉及分布式事务）

   - 用户名、邮箱、手机号、身份证都需要保证全平台唯一，因为这4个字段都可以作为登录账号使用。
   - 新增的员工默认密码可以通过`common.yml`的`lamp.system.defPwd`修改。

   ![](/images/intro/操作_员工维护_新增.png)

2. 编辑

   修改base_employee表的数据

   ![](/images/intro/操作_员工维护_编辑.png)

3. 绑定角色

   为员工绑定角色。为了解决角色表数据过多的问题，点击**绑定**或**取消绑定**时，会实时给员工绑定该角色。

   ![](/images/intro/操作_员工维护_绑定角色.png)

4. 删除

   删除base_employee、def_user_tenant_rel数据，保留def_user表数据，删除了员工后，该“员工”还是能登录，只是不能切换到该企业了。

5. 查看

   查看base_employee、def_user的数据。 员工信息是base_employee表的数据，用户信息是def_user表的数据。

   ![](/images/intro/操作_员工维护_查看.png)

6. 邀请

   ![](/images/intro/基础平台_员工维护_邀请.png)

   若用户在平台已经存在了账号，可以通过邀请功能，将用户邀请加入贵企业。
