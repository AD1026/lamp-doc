---
title: 登录
index: false
category:
  - 功能介绍
tag:
  - 功能介绍
  - 登录
---

## 区别

登录功能在3.x和4.x版本有如下区别：

::: tabs

@tab 3.x

- 需要输入==租户编码==、==用户名==、==密码==才能登录
- 不能切换租户，一个用户只能属于1个租户。若出现1个用户确实属于多个租户的情况，需要在每个租户下单独创建账号。

@tab 4.x

- 需要输入==用户名==、==密码==就能登录
- 一个用户可以属于多个租户，登录系统后，会默认进入上一次进入的租户，并可以切换到其他租户

:::



## 演示账号

登录页左侧展示了演示环境中存在的账号和密码，提供给大家体验时使用。二次开发时，除了保留lamp账号，其他账号可以删除。

![](/images/intro/操作_登录页.png)



## 登录

- 登录系统的账号可以是用户名、邮箱、手机号、身份证。

  在开发运营系统 - 租户管理 - 用户维护页面创建用户时，填写的这4个参数，均可以作为登录账号，系统会根据正则表达式判断，填写的字符串符合什么特征，就取什么字段来作为登录账号进行校验。

  ![](/images/intro/操作_新建用户.png)

  在基础平台-用户中心-员工维护页面创建员工时，填写的登录名、手机可以作为登录账号。登录名是非必填，若不填，系统会生成一个随机字符串作为登录账号。

  ![](/images/intro/操作_新建员工.png)

- 登录系统的密码

  1. 创建用户和创建员工员工时，系统使用配置的默认密码作为用户的初始密码。
  2. 管理员可以通过重置密码功能修改用户的密码。
  3. 用户登录系统后也可以在个人中心修改自己的密码。
  4. 用户忘记登录密码，可以自行在登录页使用忘记密码功能找回密码。
  5. 在开发、测试环境可以修改verifyPassword为false，实现登录时不校验密码的正确性。
  6. 用户登录时，可以修改配置，用以控制连续输错{maxPasswordErrorNum}次，将锁定{passwordErrorLockUserTime}时间

  ```yaml
  # common.yml
  lamp:
    system:    # 详情看: SystemProperties
      # 登录时否验证密码有效性 （常用于开发环境快速登录）
      verifyPassword: true
      # 默认用户密码
      defPwd: '123456'
      # 密码最大输错次数  小于0不限制
      maxPasswordErrorNum: 10
      # 密码错误锁定用户时间  除了0表示锁定到今天结束，还支持m、h、d、w、M、y等单位
      passwordErrorLockUserTime: '0'
  ```

  

- 验证码

  1. 图形验证码默认使用算数验证码，可以修改配置切换为：数字gif、数字png、中文png、中文gif、算数
  2. 在开发、测试环境可以修改verifyCaptcha为false，实现登录时不校验密码的正确性。

  ```yaml
  # common.yml
  lamp:
    system:    # 详情看: SystemProperties
      # 登录时否验证验证码有效性 （常用于开发环境快速登录）
      verifyCaptcha: true
    captcha:
      # 登录界面的验证码配置 详情看：CaptchaProperties
      type: ARITHMETIC   # 可选项 GIF、SPEC、CHINESE、CHINESE_GIF、ARITHMETIC
      width: 158
      height: 58
      len: 2
      charType: 2   
  ```

- 记住我

  未实现



## 登录逻辑

```flow
st=>start: 开始|past
e=>end: 结束|future
op1=>operation: 操作1|past
op2=>operation: 操作2|current
sub1=>subroutine: 子程序|invalid
cond=>condition: 是/否?|approved
c2=>condition: 判断2|rejected
io=>inputoutput: 进行反思...|future

st->op1(right)->cond
cond(yes, right)->c2
cond(no)->sub1(left)->op1
c2(yes)->io->e
c2(no)->op2->e
```

